<!DOCTYPE html>
<html lang="en">

<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install Our App</title>
    <script>
        function redirectToStore() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;

            // Check if the user is on Android
            if (/android/i.test(userAgent)) {
                window.location.href = "https://play.google.com/store/apps/details?id=com.gennie.vaidikavignanam";
                return;
            }

            // Check if the user is on iOS
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                window.location.href = "https://apps.apple.com/app/id1557728556";
                return;
            }

            // If neither Android nor iOS, show the webpage (for desktop users)
            document.getElementById("web-content").style.display = "block";
        }

        // metadata
        function updateMetaTags() {
            const params = new URLSearchParams(window.location.search);
            console.log("Param Data : ", params);
            console.log("Param Get Name : ", params.get('name'));
            console.log("Param Get Image : ", params.get('image'));
            console.log("Param Get Desc : ", params.get('desc'));

            const productName = params.get('name') || 'Demo App';
            const productImage = params.get('image') || 'https://prod-website-a2j4h8t1f6.vignanam.guru/images/logo/Vignanam_Fire_Logo.png';
            const productDesc = params.get('desc') || 'Demo app description';

            // let metaTags = document.getElementsByTagName("meta");
            // console.log("Meta Tags : ", metaTags);
            // for (let meta of metaTags) {
            //     console.log("Meta Name : ", meta.getAttribute("name"));
            //     console.log("Meta Content : ", meta.getAttribute("content"));
            //     console.log("Meta property : ", meta.getAttribute("property"));

            //     if (meta.getAttribute("name") === "title") {
            //         meta.setAttribute("content", "productName");
            //         break;
            //     }
            // }

            document.getElementById('title').setAttribute("content", "productName");
            document.getElementById('image').setAttribute("content", productImage);
            document.getElementById('description').setAttribute("content", productDesc);
            // document.querySelector("meta[property='og:url']").setAttribute("content", window.location.href); // Add URL update
        }
        updateMetaTags();
    </script>

    <!-- Open Graph Meta Tags (Will be updated dynamically) -->
    <meta name="title" property="og:title" content="Demo App">
    <meta name="description" property="og:description" content="Demo app description">
    <meta name="image" property="og:image"
        content="https://prod-website-a2j4h8t1f6.vignanam.guru/images/logo/Vignanam_Fire_Logo.png">
    <meta property="og:image" content="">
    <meta property="og:type" content="website">

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }

        #web-content {
            display: none;
        }
    </style>
</head>

<body onload="redirectToStore()">
    <div id="web-content">
        <h1>Welcome to Our App</h1>
        <p>Download our app to get started!</p>
        <p><a href="https://play.google.com/store/apps/details?id=com.gennie.vaidikavignanam">Get it on Google Play</a>
        </p>
        <p><a href="https://apps.apple.com/app/id1557728556">Download on the App Store</a></p>
    </div>
    <footer>
        <p>&copy; 2023 Our App. All rights reserved.</p>
    </footer>
</body>

</html>